<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session 5: APIs, JSON & Data-Driven Styling</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
</head>

<body data-bs-spy="scroll" data-bs-target="#navbar-example3" data-bs-smooth-scroll="true" tabindex="0">
    <button id="back-to-top" class="btn btn-primary rounded-circle" onclick="scrollToTop()">↑</button>

    <header class="text-center">
        <div class="container">
            <h1 class="display-5">Session 5: APIs, JSON & Data-Driven Styling</h1>
            <p class="lead">Working with web APIs, JSON data, and building dynamic, data-driven applications</p>
            <div class="mt-3">
                <a href="./session4.html" class="btn btn-outline-light btn-sm me-2">← Previous Session</a>
                <a href="../index.html" class="btn btn-outline-light btn-sm me-2">Course Home</a>
                <a href="https://classroom.github.com/a/arUkoRCL" target="_blank" class="btn btn-light btn-sm">ICA 14 (accept here)</a>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="row">
            <!-- Progress tracker / Table of contents -->
            <div class="col-md-3">
                <div class="progress-tracker">
                    <h5>In This Session</h5>
                    <nav id="navbar-example3" class="navbar bg-light flex-column align-items-stretch p-3 rounded mb-4">
                        <nav class="nav nav-pills flex-column">
                            <a class="nav-link" href="#intro-apis">Introduction to Web APIs</a>
                            <a class="nav-link" href="#json-basics">JSON Data Format</a>
                            <a class="nav-link" href="#fetch-api">The Fetch API</a>
                            <a class="nav-link" href="#async-await">Async/Await <span
                                    class="optional-tag">Optional</span></a>
                            <a class="nav-link" href="#working-with-data">Working with API Data</a>
                            <a class="nav-link" href="#data-driven-styling">Data-Driven Styling</a>
                            <a class="nav-link" href="#practice-exercises">Practice Exercises</a>
                            <a class="nav-link" href="#session-summary">Session Summary</a>
                        </nav>
                    </nav>

                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Learning Objectives</h5>
                            <ul class="mb-0">
                                <li>Understand what APIs are and how they work</li>
                                <li>Work with JSON data format</li>
                                <li>Use the Fetch API to make HTTP requests</li>
                                <li>Implement async/await for asynchronous operations</li>
                                <li>Process and display data from external sources</li>
                                <li>Apply dynamic styling based on data values</li>
                                <li>Complete the grocery list application</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main content -->
            <div class="col-md-9">
                <div id="content" class="scrollspy-example rounded-2" tabindex="0">
                    <!-- Introduction to Web APIs section -->
                    <section id="intro-apis" class="mb-5">
                        <h2>Introduction to Web APIs</h2>
                        <p class="lead">Understanding what APIs are and how they enable communication between
                            applications.</p>

                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">What are Web APIs?</h5>
                                <p>API stands for Application Programming Interface. An API is a set of rules and
                                    protocols that allows
                                    different software applications to communicate with each other.</p>
                                <p>Web APIs work similarly to a restaurant menu - they provide a list of "dishes"
                                    (operations) that a
                                    developer can order (call) to get specific results.</p>
                                <p>APIs act as the traffic route between a website and an associated database or
                                    service, letting your
                                    JavaScript code request and receive data from external sources.</p>
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">Common Types of Web APIs</h5>
                                        <ul>
                                            <li><strong>Browser APIs</strong> - Built into the browser (like the DOM
                                                API)</li>
                                            <li><strong>Third-party APIs</strong> - Services offered by other companies
                                                (like weather data,
                                                maps, or social media)</li>
                                            <li><strong>REST APIs</strong> - Follow REST architecture principles and use
                                                HTTP requests to
                                                access and manipulate data</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">Why Use APIs?</h5>
                                        <ul>
                                            <li>Get data from external sources (like weather information or stock
                                                prices)</li>
                                            <li>Integrate with third-party services (like payment processors)</li>
                                            <li>Access functionality you don't want to build yourself</li>
                                            <li>Connect your frontend application to your backend database</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <strong>Remember:</strong> Most APIs have documentation that explains how to use them, what
                            endpoints are
                            available, and what data they return.
                        </div>
                    </section>

                    <!-- JSON Data Format section -->
                    <section id="json-basics" class="mb-5">
                        <h2>JSON Basics</h2>
                        <p class="lead">Understanding JSON format and how to work with it in JavaScript.</p>

                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">What is JSON?</h5>
                                <p>JSON (JavaScript Object Notation) is a lightweight data-interchange format that's
                                    easy for humans to read
                                    and write and easy for machines to parse and generate.</p>
                                <p>JSON is text-based and language-independent, but it uses conventions familiar to
                                    JavaScript programmers.
                                    It's commonly used to transmit data between a server and a web application.</p>
                            </div>
                        </div>

                        <h3>JSON Syntax</h3>
                        <p>JSON data is written as name/value pairs, similar to JavaScript objects:</p>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="code-block">
                                    <span class="comment">// A simple JSON object</span>
                                    {
                                    <span class="string">"name"</span>: <span class="string">"John"</span>,
                                    <span class="string">"age"</span>: <span class="number">30</span>,
                                    <span class="string">"isStudent"</span>: <span class="boolean">false</span>
                                    }
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="code-block">
                                    <span class="comment">// JSON with nested objects and arrays</span>
                                    {
                                    <span class="string">"name"</span>: <span class="string">"John"</span>,
                                    <span class="string">"hobbies"</span>: [<span class="string">"reading"</span>, <span
                                        class="string">"cycling"</span>],
                                    <span class="string">"address"</span>: {
                                    <span class="string">"city"</span>: <span class="string">"New York"</span>,
                                    <span class="string">"zipCode"</span>: <span class="string">"10001"</span>
                                    }
                                    }
                                </div>
                            </div>
                        </div>

                        <h3>Working with JSON in JavaScript</h3>
                        <p>JavaScript provides two main methods for working with JSON:</p>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title"><code>JSON.parse()</code></h5>
                                        <p>Converts a JSON string into a JavaScript object</p>
                                        <div class="code-block">
                                            <span class="keyword">const</span> <span class="variable">jsonString</span> = <span class="string">'{"name":"John","age":30}'</span>;
                                            <span class="keyword">const</span> <span class="variable">person</span> = <span class="keyword">JSON</span>.<span class="function">parse</span>(<span class="variable">jsonString</span>);
                                            <span class="keyword">console</span>.<span class="function">log</span>(<span class="variable">person</span>.<span class="variable">name</span>); <span class="comment">// "John"</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title"><code>JSON.stringify()</code></h5>
                                        <p>Converts a JavaScript object into a JSON string</p>
                                        <div class="code-block">
                                            <span class="keyword">const</span> <span class="variable">person</span> = {
                                            <span class="variable">name</span>: <span class="string">"John"</span>,
                                            <span class="variable">age</span>: <span class="number">30</span>
                                            };
                                            <span class="keyword">const</span> <span class="variable">jsonString</span> = <span class="keyword">JSON</span>.<span class="function">stringify</span>(<span class="variable">person</span>);
                                            <span class="keyword">console</span>.<span class="function">log</span>(<span class="variable">jsonString</span>); <span class="comment">// '{"name":"John","age":30}'</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- JSON Demo -->
                        <div class="demo-section">
                            <h3 class="mb-3">JSON Demo</h3>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-floating mb-3">
                                        <textarea class="form-control" id="json-input" style="height: 200px"
                                            placeholder="Enter JSON here">{"name": "John", "age": 30, "hobbies": ["reading", "cycling"]}</textarea>
                                        <label for="json-input">Enter JSON or JavaScript object</label>
                                    </div>
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-primary" id="parse-json-btn">Parse JSON</button>
                                        <button class="btn btn-success" id="stringify-json-btn">Stringify to
                                            JSON</button>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div id="json-result" class="bg-light p-3 rounded"
                                        style="height: 280px; overflow: auto;">
                                        <p class="text-muted">Results will appear here</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Fetch API section -->
                    <section id="fetch-api" class="mb-5">
                        <h2>The Fetch API</h2>
                        <p class="lead">Using the Fetch API to request data from servers and APIs.</p>

                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">What is the Fetch API?</h5>
                                <p>The Fetch API provides a simple interface for making HTTP requests to servers from
                                    browsers. It's a
                                    modern replacement for XMLHttpRequest and is built into modern browsers.</p>
                                <p>Fetch is promise-based, making it work well with modern JavaScript's asynchronous
                                    patterns. It's used to
                                    get data from APIs, submit form data, and more.</p>
                            </div>
                        </div>

                        <h3>Basic Fetch Syntax</h3>
                        <div class="code-block">
                            <span class="function">fetch</span>(<span
                                class="string">'https://api.example.com/data'</span>)
                            .<span class="function">then</span>(<span class="variable">response</span> => <span
                                class="variable">response</span>.<span class="function">json</span>())
                            .<span class="function">then</span>(<span class="variable">data</span> => <span
                                class="keyword">console</span>.<span class="function">log</span>(<span
                                class="variable">data</span>))
                            .<span class="function">catch</span>(<span class="variable">error</span> => <span
                                class="keyword">console</span>.<span class="function">error</span>(<span
                                class="string">'Error:'</span>,
                            <span class="variable">error</span>));
                        </div>

                        <div class="row mb-4 mt-4">
                            <div class="">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">Making a GET Request</h5>
                                        <p>GET requests are used to retrieve data from the server.</p>
                                        <div class="code-block">
                                            <span class="function">fetch</span>(<span class="string">'https://jsonplaceholder.typicode.com/todos/1'</span>)
                                            .<span class="function">then</span>(<span class="variable">response</span> => {
                                            <span class="keyword">if</span> (!<span class="variable">response</span>.<span class="variable">ok</span>) {
                                            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">`HTTP error! Status:
                                            </span>${<span class="variable">response</span>.<span class="variable">status</span>}<span class="string">`</span>);
                                            }
                                            <span class="keyword">return</span> <span class="variable">response</span>.<span class="function">json</span>();
                                            })
                                            .<span class="function">then</span>(<span class="variable">data</span> => <span class="keyword">console</span>.<span class="function">log</span>(<span class="variable">data</span>))
                                            .<span class="function">catch</span>(<span class="variable">error</span> => <span class="keyword">console</span>.<span class="function">error</span>(<span class="variable">error</span>));
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Fetch API Demo -->
                        <div class="demo-section">
                            <h3 class="mb-3">Fetch API Demo</h3>
                            <p>Click the button below to fetch data from the JSONPlaceholder API:</p>

                            <button id="fetch-demo-button" class="btn btn-primary mb-3">Fetch Data</button>

                            <div id="fetch-result" class="bg-light p-3 rounded">
                                <p class="text-muted">Results will appear here</p>
                            </div>
                        </div>
                    </section>

                    <!-- Async/Await section -->
                    <section id="async-await" class="mb-5">
                        <h2>Async/Await</h2>
                        <p class="lead">Making asynchronous code easier to read and write.</p>

                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">What is Async/Await?</h5>
                                <p>Async/await is a syntax that makes working with promises more comfortable. It allows
                                    you to write
                                    asynchronous code that looks and behaves more like synchronous code.</p>
                                <p>The <code>async</code> keyword is used to define an asynchronous function, and the
                                    <code>await</code>
                                    keyword is used inside async functions to pause execution until a promise is
                                    resolved.
                                </p>
                            </div>
                        </div>

                        <h3>Basic Async/Await Syntax</h3>
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="code-block">
                                    <span class="comment">// Using promises with .then()</span>
                                    <span class="function">fetch</span>(<span
                                        class="string">'https://api.example.com/data'</span>)
                                    .<span class="function">then</span>(<span class="variable">response</span> => <span
                                        class="variable">response</span>.<span class="function">json</span>())
                                    .<span class="function">then</span>(<span class="variable">data</span> => <span
                                        class="keyword">console</span>.<span class="function">log</span>(<span
                                        class="variable">data</span>))
                                    .<span class="function">catch</span>(<span class="variable">error</span> => <span
                                        class="keyword">console</span>.<span class="function">error</span>(<span
                                        class="variable">error</span>));
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="code-block">
                                    <span class="comment">// Using async/await</span>
                                    <span class="keyword">async</span> <span class="keyword">function</span> <span
                                        class="function">fetchData</span>() {
                                    <span class="keyword">try</span> {
                                    <span class="keyword">const</span> <span class="variable">response</span> = <span
                                        class="keyword">await</span> <span class="function">fetch</span>(<span
                                        class="string">'https://api.example.com/data'</span>);
                                    <span class="keyword">const</span> <span class="variable">data</span> = <span
                                        class="keyword">await</span> <span class="variable">response</span>.<span
                                        class="function">json</span>();
                                    <span class="keyword">console</span>.<span class="function">log</span>(<span
                                        class="variable">data</span>);
                                    } <span class="keyword">catch</span> (<span class="variable">error</span>) {
                                    <span class="keyword">console</span>.<span class="function">error</span>(<span
                                        class="variable">error</span>);
                                    }
                                    }

                                    <span class="function">fetchData</span>();
                                </div>
                            </div>
                        </div>

                        <h3>Error Handling with Async/Await</h3>
                        <p>With async/await, you can use traditional try/catch blocks for error handling:</p>

                        <div class="code-block">
                            <span class="keyword">async</span> <span class="keyword">function</span> <span
                                class="function">fetchUserData</span>(<span class="variable">userId</span>) {
                            <span class="keyword">try</span> {
                            <span class="comment">// Fetch user data</span>
                            <span class="keyword">const</span> <span class="variable">userResponse</span> = <span
                                class="keyword">await</span> <span class="function">fetch</span>(<span
                                class="string">`https://jsonplaceholder.typicode.com/users/</span>${<span
                                class="variable">userId</span>}<span class="string">`</span>);

                            <span class="keyword">if</span> (!<span class="variable">userResponse</span>.<span
                                class="variable">ok</span>) {
                            <span class="keyword">throw</span> <span class="keyword">new</span> <span
                                class="function">Error</span>(<span class="string">`HTTP error! Status: </span>${<span
                                class="variable">userResponse</span>.<span class="variable">status</span>}<span
                                class="string">`</span>);
                            }

                            <span class="keyword">const</span> <span class="variable">userData</span> = <span
                                class="keyword">await</span>
                            <span class="variable">userResponse</span>.<span class="function">json</span>();
                            <span class="keyword">return</span> <span class="variable">userData</span>;
                            } <span class="keyword">catch</span> (<span class="variable">error</span>) {
                            <span class="keyword">console</span>.<span class="function">error</span>(<span
                                class="string">'Error fetching
                                user data:'</span>, <span class="variable">error</span>);
                            <span class="keyword">throw</span> <span class="variable">error</span>; <span
                                class="comment">// Re-throw to let
                                caller handle it</span>
                            }
                            }
                        </div>

                        <!-- Async/Await Demo -->
                        <div class="demo-section">
                            <h3 class="mb-3">Async/Await Demo</h3>
                            <p>This demo fetches user data and then gets posts by that user:</p>

                            <button id="async-demo-button" class="btn btn-primary mb-3">Fetch User and Posts</button>

                            <div id="async-result" class="bg-light p-3 rounded">
                                <p class="text-muted">Results will appear here</p>
                            </div>
                        </div>
                    </section>

                    <!-- Working with Data section -->
                    <section id="working-with-data" class="mb-5">
                        <h2>Working with API Data</h2>
                        <p class="lead">Practical techniques for requesting, processing, and displaying data from APIs.
                        </p>

                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Common Tasks When Working with API Data</h5>
                                <ul>
                                    <li>Fetching data from an API</li>
                                    <li>Processing and transforming the data</li>
                                    <li>Filtering and sorting the data</li>
                                    <li>Displaying the data in your application</li>
                                    <li>Handling loading states and errors</li>
                                </ul>
                            </div>
                        </div>

                        <h3>Handling Loading States and Errors</h3>
                        <div class="code-block">
                            <span class="keyword">async</span> <span class="keyword">function</span> <span class="function">fetchUserData</span>() { <span class="comment">// Show loading indicator</span>
                            <span class="keyword">document</span>.<span class="function">getElementById</span>(<span class="string">'loading'</span>).<span class="variable">style</span>.<span class="variable">display</span> = <span class="string">'block'</span>;
                            <span class="keyword">document</span>.<span class="function">getElementById</span>(<span class="string">'error'</span>).<span class="variable">style</span>.<span class="variable">display</span> = <span class="string">'none'</span>;
                            <span class="keyword">document</span>.<span class="function">getElementById</span>(<span class="string">'data'</span>).<span class="variable">style</span>.<span class="variable">display</span> = <span class="string">'none'</span>;

                            <span class="keyword">try</span> {
                            <span class="keyword">const</span> <span class="variable">response</span> = <span class="keyword">await</span>
                            <span class="function">fetch</span>(<span class="string">'https://jsonplaceholder.typicode.com/users'</span>);

                            <span class="keyword">if</span> (!<span class="variable">response</span>.<span class="variable">ok</span>) {
                            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">`HTTP error! Status: </span>${<span class="variable">response</span>.<span class="variable">status</span>}<span class="string">`</span>);
                            }

                            <span class="keyword">const</span> <span class="variable">users</span> = <span class="keyword">await</span>
                            <span class="variable">response</span>.<span class="function">json</span>();

                            <br>
                            <span class="comment">// Display the data</span>
                            <span class="function">displayUsers</span>(<span class="variable">users</span>);

                            <span class="comment">// Hide loading, show data</span>
                            <span class="keyword">document</span>.<span class="function">getElementById</span>(<span class="string">'loading'</span>).<span class="variable">style</span>.<span class="variable">display</span> = <span class="string">'none'</span>;
                            <span class="keyword">document</span>.<span class="function">getElementById</span>(<span class="string">'data'</span>).<span class="variable">style</span>.<span class="variable">display</span> = <span class="string">'block'</span>;
                            } <span class="keyword">catch</span> (<span class="variable">error</span>) {
                            <span class="comment">// Hide loading, show error</span>
                            <span class="keyword">document</span>.<span class="function">getElementById</span>(<span class="string">'loading'</span>).<span class="variable">style</span>.<span class="variable">display</span> = <span class="string">'none'</span>;
                            <span class="keyword">document</span>.<span class="function">getElementById</span>(<span class="string">'error'</span>).<span class="variable">style</span>.<span class="variable">display</span> = <span class="string">'block'</span>;
                            <span class="keyword">document</span>.<span class="function">getElementById</span>(<span class="string">'error'</span>).<span class="variable">textContent</span> = <span class="string">`Error:
                            </span>${<span class="variable">error</span>.<span class="variable">message</span>}<span
                                class="string">`</span>;
                            }
                            }

                            <span class="keyword">function</span> <span class="function">displayUsers</span>(<span class="variable">users</span>) {
                            <span class="keyword">const</span> <span class="variable">tableBody</span> = <span class="keyword">document</span>.<span class="function">getElementById</span>(<span class="string">'user-table-body'</span>);
                            <span class="variable">tableBody</span>.<span class="variable">innerHTML</span> = <span class="string">''</span>;

                            <span class="variable">users</span>.<span class="function">forEach</span>(<span class="variable">user</span> =>
                            {
                            <span class="keyword">const</span> <span class="variable">row</span> = <span class="keyword">document</span>.<span class="function">createElement</span>(<span class="string">'tr'</span>);
                            <span class="variable">row</span>.<span class="variable">innerHTML</span> = <span class="string">`
                                <td>
                            </span>${<span class="variable">user</span>.<span class="variable">id</span>}<span class="string"></td>
                                <td>
                            </span>${<span class="variable">user</span>.<span class="variable">name</span>}<span class="string"></td>
                                <td>
                            </span>${<span class="variable">user</span>.<span class="variable">email</span>}<span class="string"></td>
                                <td>
                            </span>${<span class="variable">user</span>.<span class="variable">company</span>.<span class="variable">name</span>}<span class="string"></td>
                                `</span>;
                            <span class="variable">tableBody</span>.<span class="function">appendChild</span>(<span class="variable">row</span>);
                            });
                            }
                        </div>

                        <!-- Working with Data Demo -->
                        <div class="demo-section">
                            <h3 class="mb-3">Fetching and Displaying User Data</h3>

                            <button id="fetch-data-button" class="btn btn-primary mb-3">Fetch Users</button>

                            <div id="loading-indicator" class="d-none">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="spinner-border text-primary me-2" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                    <span>Loading data...</span>
                                </div>
                            </div>

                            <div id="error-message" class="alert alert-danger d-none"></div>

                            <div id="data-summary" class="alert alert-success d-none mb-3">
                                Found <span id="user-count">0</span> users
                            </div>

                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Company</th>
                                        </tr>
                                    </thead>
                                    <tbody id="user-table-body">
                                        <!-- Data will be inserted here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>

                    <!-- Data-Driven Styling section -->
                    <section id="data-driven-styling" class="mb-5">
                        <h2>Data-Driven Styling</h2>
                        <p class="lead">Using data values to dynamically change the appearance of elements.</p>
                    
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">What is Data-Driven Styling?</h5>
                                <p>Data-driven styling means changing the visual appearance of elements based on data values. This provides
                                    visual cues that help users better understand the data.</p>
                                <p>Common examples include:</p>
                                <ul>
                                    <li>Color-coding values based on thresholds (e.g., red for negative numbers, green for positive)</li>
                                    <li>Changing the size of elements to represent quantities</li>
                                    <li>Showing or hiding elements based on data conditions</li>
                                    <li>Applying different CSS classes based on data states</li>
                                </ul>
                            </div>
                        </div>
                    
                        <h3>Data-Driven Styling Example</h3>
                        <div class="code-block">
                            <span class="comment">// Function to color-code price values</span>
                            <span class="keyword">function</span> <span class="function">applyPriceStyling</span>() {
                            <span class="keyword">const</span> <span class="variable">priceElements</span> = <span class="keyword">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'.price'</span>);
                        
                            <span class="variable">priceElements</span>.<span class="function">forEach</span>(<span class="variable">element</span> => {
                            <span class="keyword">const</span> <span class="variable">price</span> = <span class="function">parseFloat</span>(<span class="variable">element</span>.<span class="variable">textContent</span>.<span class="function">replace</span>(<span class="string">'$'</span>, <span class="string">''</span>));
                        
                            <span class="keyword">if</span> (<span class="variable">price</span> >= <span class="number">100</span>) {
                            <span class="variable">element</span>.<span class="variable">style</span>.<span class="variable">color</span> = <span class="string">'red'</span>;
                            <span class="variable">element</span>.<span class="variable">style</span>.<span class="variable">fontWeight</span> = <span class="string">'bold'</span>;
                            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">price</span> >= <span class="number">50</span>) {
                            <span class="variable">element</span>.<span class="variable">style</span>.<span class="variable">color</span> = <span class="string">'orange'</span>;
                            } <span class="keyword">else</span> {
                            <span class="variable">element</span>.<span class="variable">style</span>.<span class="variable">color</span> = <span class="string">'green'</span>;
                            }
                            });
                            }
                        
                            <br>
                            <span class="comment">// Function to visualize stock levels</span>
                            <span class="keyword">function</span> <span class="function">visualizeStockLevels</span>() {
                            <span class="keyword">const</span> <span class="variable">stockElements</span> = <span class="keyword">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'.stock-level'</span>);
                        
                            <span class="variable">stockElements</span>.<span class="function">forEach</span>(<span class="variable">element</span> => {
                            <span class="keyword">const</span> <span class="variable">stockValue</span> = <span class="function">parseInt</span>(<span class="variable">element</span>.<span class="function">getAttribute</span>(<span class="string">'data-stock'</span>));
                        
                            <br>
                            <span class="comment">// Create a visual bar with width based on stock</span>
                            <span class="keyword">const</span> <span class="variable">maxWidth</span> = <span class="number">100</span>;
                            <span class="keyword">const</span> <span class="variable">width</span> = <span class="function">Math</span>.<span class="function">min</span>((<span class="variable">stockValue</span> / <span class="number">100</span>) * <span class="variable">maxWidth</span>, <span class="variable">maxWidth</span>);
                        
                            <br>
                            <span class="comment">// Set color based on stock level</span>
                            <span class="keyword">let</span> <span class="variable">color</span>;
                            <span class="keyword">let</span> <span class="variable">label</span>;
                        
                            <span class="keyword">if</span> (<span class="variable">stockValue</span> === <span class="number">0</span>) {
                            <span class="variable">color</span> = <span class="string">'#dc3545'</span>; <span class="comment">// red</span>
                            <span class="variable">label</span> = <span class="string">'Out of Stock'</span>;
                            } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">stockValue</span> <= <span class="number">10</span>) {
                                <span class="variable">color</span> = <span class="string">'#fd7e14'</span>; <span class="comment">// orange</span>
                                <span class="variable">label</span> = <span class="string">'Low Stock'</span>;
                                } <span class="keyword">else</span> {
                                <span class="variable">color</span> = <span class="string">'#198754'</span>; <span class="comment">// green</span>
                                <span class="variable">label</span> = <span class="string">'In Stock'</span>;
                                }
                        
                                <span class="variable">element</span>.<span class="variable">innerHTML</span> = <span class="string">`<span style="display: flex; align-items: center;"><span style="width: ${width}%; height: 20px; background-color: ${color}; border-radius: 4px;"></span><span style="margin-left: 8px;">${stockValue} (${label})</span></span>`</span>;
                                });
                            }
                        </div>
                    
                        <!-- Data-Driven Styling Demo -->
                        <div class="demo-section">
                            <h3 class="mb-3">Data-Driven Styling Demo</h3>
                    
                            <button id="style-demo-button" class="btn btn-primary mb-3">Apply Data-Driven Styling</button>
                    
                            <div class="table-responsive">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Product</th>
                                            <th>Price</th>
                                            <th>Stock Level</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Laptop</td>
                                            <td class="price">$899.99</td>
                                            <td>
                                                <div class="stock-level" data-stock="15"></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Smartphone</td>
                                            <td class="price">$499.99</td>
                                            <td>
                                                <div class="stock-level" data-stock="8"></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Headphones</td>
                                            <td class="price">$59.99</td>
                                            <td>
                                                <div class="stock-level" data-stock="24"></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Keyboard</td>
                                            <td class="price">$29.99</td>
                                            <td>
                                                <div class="stock-level" data-stock="0"></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Monitor</td>
                                            <td class="price">$249.99</td>
                                            <td>
                                                <div class="stock-level" data-stock="5"></div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>

                    <!-- Practice Exercises section -->
                    <section id="practice-exercises" class="mb-5">
                        <h2>Practice Exercises</h2>
                        <p class="lead">Apply what you've learned with these exercises.</p>

                        <!-- Exercise 1: Price Formatting -->
                        <div class="practice-container">
                            <h3>Exercise 1: Format Prices</h3>
                            <p>Create a function that formats prices to look like currency.</p>

                            <div class="row mb-3">
                                <div class="col-md-8">
                                    <div class="form-floating mb-3">
                                        <textarea class="form-control" id="exercise1-input" style="height: 220px"
                                            placeholder="Write your code here">
                        // Write a function called formatPrices that:
                        // 1. Takes an array of product objects with prices
                        // 2. Adds a formattedPrice property with a dollar sign (e.g., "$19.99")
                        // 3. Returns the updated products array
                        
                        function formatPrices(products) {
                        // Your code here
                        }
                        
                        // Test data - don't modify this
                        const products = [
                        { id: 1, name: "Laptop", price: 999.99 },
                        { id: 2, name: "Smartphone", price: 499.50 },
                        { id: 3, name: "Headphones", price: 59.99 },
                        { id: 4, name: "Keyboard", price: 29 }
                        ];
                                            </textarea>
                                        <label for="exercise1-input">Write your code here</label>
                                    </div>
                                    <button id="exercise1-run" class="btn btn-primary">Run Code</button>
                                </div>
                                <div class="col-md-4">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <h5 class="card-title">Requirements</h5>
                                            <p>Complete the <code>formatPrices</code> function to:</p>
                                            <ul class="mb-0">
                                                <li>Leave the original products unchanged</li>
                                                <li>Add a <code>formattedPrice</code> property with a dollar sign (e.g.,
                                                    "$999.99")</li>
                                                <li>Make sure prices always have 2 decimal places</li>
                                                <li>Return the updated products array</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="exercise1-output" class="alert" style="display: none;"></div>
                            <div id="exercise1-result"></div>
                        </div>

                        <!-- Exercise 2: User Data Alert -->
                        <div class="practice-container">
                            <h3>Exercise 2: Retrieve and Alert User Data</h3>
                            <p>Create a function that retrieves user data and displays it in an alert.</p>

                            <div class="row mb-3">
                                <div class="col-md-8">
                                    <div class="form-floating mb-3">
                                        <textarea class="form-control" id="exercise2-input" style="height: 220px"
                                            placeholder="Write your code here">
                        // Write a function called displayUserData that:
                        // 1. "Retrieves" user data from the provided userData object
                        // 2. Creates a formatted message with the user's name, email, and city
                        // 3. Displays the message in an alert
                        
                        // This simulates data from an API
                        const userData = {
                        id: 1,
                        name: "Leanne Graham",
                        email: "leanne@example.com",
                        address: {
                            city: "New York",
                            zipcode: "10001"
                        }
                        };
                        
                        function displayUserData() {
                        // Your code here
                        }
                                            </textarea>
                                        <label for="exercise2-input">Write your code here</label>
                                    </div>
                                    <button id="exercise2-run" class="btn btn-primary">Check Code</button>
                                    <button id="display-user-button" class="btn btn-success ms-2">Display User</button>
                                </div>
                                <div class="col-md-4">
                                    <div class="card h-100">
                                        <div class="card-body">
                                            <h5 class="card-title">Requirements</h5>
                                            <p>Create a function that:</p>
                                            <ul class="mb-0">
                                                <li>Accesses the userData properties</li>
                                                <li>Creates a nicely formatted message with name, email, and city</li>
                                                <li>Uses alert() to display the message</li>
                                                <li>Handle nested objects correctly (address.city)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="exercise2-output" class="alert" style="display: none;"></div>
                        </div>
                    </section>

                    <!-- Session Summary -->
                    <section id="session-summary">
                        <h2>Session Summary</h2>
                        <p class="lead">In this session, you've learned how to work with APIs and external data.</p>

                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Key Concepts Covered</h5>
                                <ul class="mb-0">
                                    <li><strong>Web APIs</strong> - Understanding what APIs are and how they enable
                                        communication between
                                        applications</li>
                                    <li><strong>JSON</strong> - Learning the JSON format and how to work with it using
                                        parse()
                                        and
                                        stringify()</li>
                                    <li><strong>Fetch API</strong> - Making HTTP requests to servers and APIs</li>
                                    <li><strong>Async/Await</strong> - Writing cleaner asynchronous code with async/await
                                        syntax
                                    </li>
                                    <li><strong>Working with API Data</strong> - Processing, filtering, and displaying data
                                        from
                                        APIs</li>
                                    <li><strong>Data-Driven Styling</strong> - Changing element appearance based on data
                                        values
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <h3>Next Steps</h3>
                        <p>Now that you've learned about APIs and working with external data, you can:</p>
                        <ul>
                            <li>Build web applications that connect to real-world data sources</li>
                            <li>Create dynamic interfaces that update based on API responses</li>
                            <li>Apply these concepts to your own projects</li>
                        </ul>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Additional Resources</h5>
                                        <ul class="mb-0">
                                            <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"
                                                    target="_blank">MDN:
                                                    Fetch API</a></li>
                                            <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON"
                                                    target="_blank">MDN: JSON</a></li>
                                            <li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Async_await"
                                                    target="_blank">MDN: Async/Await</a></li>
                                            <li><a href="https://jsonplaceholder.typicode.com/"
                                                    target="_blank">JSONPlaceholder</a> - Free
                                                online REST API for testing</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Practice Projects</h5>
                                        <p>Try these projects to reinforce your learning:</p>
                                        <ol class="mb-0">
                                            <li>Create a weather app using a weather API</li>
                                            <li>Build a simple movie search page using a movie database API</li>
                                            <li>Create a currency converter with real-time exchange rates</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center mt-4 mb-4">
                            <p>This concludes the JavaScript fundamentals course. Keep practicing and building projects to
                                improve your
                                skills!</p>
                            <a href="../index.html" class="btn btn-primary btn-lg">Return to Course Home</a>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h4>JavaScript Fundamentals</h4>
                    <p>Session 5: APIs, JSON & Data-Driven Styling</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <nav>
                        <ul class="list-inline">
                            <li class="list-inline-item"><a href="../index.html" class="text-white">Back to Course
                                    Home</a></li>
                            <li class="list-inline-item"><a href="./groceries.html" class="text-white">Final Project</a>
                            </li>
                        </ul>
                    </nav>
                    <p>BYU IS 120: Introduction to Web Dev</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/session5.js"></script>
</body>

</html>